(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[5],{152:function(e,t,n){},153:function(e,t,n){},155:function(e,t,n){},160:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},165:function(e,t){},198:function(e,t,n){},199:function(e,t,n){},205:function(e,t,n){e.exports=n.p+"static/media/folder-icon.3cfe2265.png"},206:function(e,t,n){},207:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"showFolderTree",(function(){return h})),n.d(a,"readFileContent",(function(){return E}));var r={};n.r(r),n.d(r,"findNodeBy",(function(){return g}));var c=n(29),l=n(0),i=n.n(l),o=n(41),u=n.n(o),s=n(30),f=n(83),m=n.n(f),d=n(85),b=n(86),p=n.n(b);function h(e){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(m.a.mark((function e(t){var n,a,r,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:3,a="".concat(s.AGENT_HOST,"/file/structure?directory=").concat(t,"&depth=").concat(n),e.next=4,p.a.get(a);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(s.AGENT_HOST,"/file/content?filePath=").concat(t),e.next=3,p.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){if(t(e))return e;var n=e.children.filter((function(e){return!e.isFile})),a=!0,r=!1,c=void 0;try{for(var l,i=n[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var o=g(l.value,t);if(o)return o}}catch(u){r=!0,c=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return null}var j=n(132),w=n.n(j);n(152);function y(e){var t=e.overlay;return i.a.createElement("div",{className:"Spinner"},t&&i.a.createElement("div",{className:"overlay"}),i.a.createElement(w.a,{type:"BallTriangle",color:"#81e6d9",height:80,width:80}))}function N(){var e=Object(o.useGlobal)("loading"),t=Object(c.a)(e,1)[0];return u.a.createElement("div",{className:"LoadingContainer"},t&&u.a.createElement(y,{overlay:!0}))}var F={rootNode:{isFile:!1,path:"/",name:"",children:[]},currentFolder:{isFile:!1,path:"/a",name:"",children:[]},loading:!1,previewing:!1,previewContent:"",previewType:"text",previewFileExt:".txt"},k=n(215),T=n(75);function _(e){var t=e.isFile,n=e.name,a=e.children,r=e.nodeOnClick,o=e.path,u=Object(l.useState)(!1),s=Object(c.a)(u,2),f=s[0],m=s[1];function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e&&f||m(!f),r(o,t,a,n)}return i.a.createElement("li",null,i.a.createElement("span",{className:function(){var e=a.length;return t?"button switch center_docu":e&&f?"button switch roots_open":"button switch center_close"}(),onClick:function(){return d(!0)}}),i.a.createElement("span",{className:"link",onClick:function(){return d(!1,!0)}},i.a.createElement("span",{className:function(){var e=a.length;return t?"button ico_docu":e&&f?"button ico_open":"button ico_close"}()}),i.a.createElement("span",{className:"node_name"},n)),i.a.createElement("ul",{className:"line"},a.filter((function(){return f})).filter((function(e){return!e.isFile})).map((function(e,t){return i.a.createElement(_,Object.assign({key:"folder-".concat(t.toString())},e,{nodeOnClick:r}))})),a.filter((function(){return f})).filter((function(e){return e.isFile})).map((function(e,t){return i.a.createElement(_,Object.assign({key:"file-".concat(t.toString())},e,{nodeOnClick:r}))}))))}n(153);function G(){var e=Object(o.useGlobal)("rootNode"),t=Object(c.a)(e,2),n=t[0],l=t[1],u=Object(o.useGlobal)("currentFolder"),s=Object(c.a)(u,2)[1],f=Object(o.useGlobal)("loading"),m=Object(c.a)(f,2)[1];return i.a.createElement("table",{className:"FileExplorer"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{width:"260px",align:"left",valign:"top"},i.a.createElement("ul",{className:"ztree"},i.a.createElement(_,{children:n.children,path:n.path,name:n.name,isFile:n.isFile,nodeOnClick:function(e,t,c){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t){m(!0);var o=r.findNodeBy(n,(function(t){return t.path===e}));if(c&&c.length)return i&&s(o),void m(!1);a.showFolderTree(e,2).then((function(e){o.children=Object(T.a)(e.children),l(Object(k.a)({},n)),i&&s(e)})).finally((function(){return m(!1)}))}},rootName:"/"}))))))}n(154),n(155);function x(e){var t=e.content;return i.a.createElement("div",{className:"TextPreview"},t)}function C(e){var t=e.base64src;return i.a.createElement("p",{className:"image is-4by3"},i.a.createElement("img",{src:t,alt:""}))}var S=n(156);function P(e){var t=e.base64src,n=Object(l.useState)(0),a=Object(c.a)(n,2),r=a[0],o=a[1];return i.a.createElement(S.Document,{file:t,onLoadSuccess:function(e){return o(e.numPages)}},new Array(r).fill(null).map((function(e,t){return i.a.createElement(S.Page,{key:"page_".concat(t+1),pageNumber:t+1})})))}n(198);function L(){var e=Object(o.useGlobal)("previewing"),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useGlobal)("previewContent"),l=Object(c.a)(r,1)[0],u=Object(o.useGlobal)("previewType"),s=Object(c.a)(u,1)[0],f=Object(o.useGlobal)("previewFileExt"),m=Object(c.a)(f,1)[0];function d(e){return"data:image/png;base64, ".concat(e)}return i.a.createElement("div",{className:function(){var e=n?"is-active":"";return"".concat("Preview modal"," ").concat(e)}()},i.a.createElement("div",{className:"modal-background"}),i.a.createElement("div",{className:"modal-content"},"text"===s&&i.a.createElement(x,{content:l}),"base64"!==!s&&[".png",".jpeg",".jpg"].includes(m)&&i.a.createElement(C,{base64src:d(l)}),"base64"===s&&".pdf"===m&&i.a.createElement(P,{base64src:d(l)})),i.a.createElement("button",{type:"button",className:"modal-close is-large","aria-label":"close",onClick:function(){return a(!1)}}))}var R=n(57),A=n.n(R);n(199);function B(){var e=Object(o.useGlobal)("rootNode"),t=Object(c.a)(e,2),n=t[0],u=t[1],s=Object(o.useGlobal)("currentFolder"),f=Object(c.a)(s,2),m=f[0],d=f[1],b=Object(o.useGlobal)("loading"),p=Object(c.a)(b,2)[1],h=Object(o.useGlobal)("previewing"),v=Object(c.a)(h,2)[1],E=Object(o.useGlobal)("previewContent"),O=Object(c.a)(E,2)[1],g=Object(o.useGlobal)("previewType"),j=Object(c.a)(g,2)[1],w=Object(o.useGlobal)("previewFileExt"),y=Object(c.a)(w,2)[1],N=Object(l.useState)([]),F=Object(c.a)(N,2),k=F[0],_=F[1];window._clickTimeout||(window._clickTimeout={});var G=function(e,t){for(var n=[],a=Math.floor(e.length%t===0?e.length/t:e.length/t+1),r=function(a){var r=e.filter((function(e,n){return Math.floor(n/t)===a}));r.length&&(r.id=A.a.generate(),n.push(r))},c=0;c<a;++c)r(c);return n}(m.children,6);function x(e,t){e.stopPropagation(),t.isFile?function(e){v(!0),a.readFileContent(e.path).then((function(e){if(e.error)throw new Error(e.error);O(e.content),j(e.isText?"text":"base64"),y(e.ext)}))}(t):t.isFile||function(e){if(e.children.length)return d(e),void C(e);p(!0),a.showFolderTree(e.path,2).then((function(e){d(e),C(e)})).finally((function(){return p(!1)}))}(t)}function C(e){if(e.path!==n.path){var t=e.path.split("/").filter((function(e,t,n){return t!==n.length-1})).join("/"),a=r.findNodeBy(n,(function(e){return e.path===t})),c=a.children.map((function(t){return t.path===e.path?e:t}));a.children=Object(T.a)(c),u(n)}}function S(e,t){var n=t.path;window._clickTimeout[n]?(x(e,t),clearTimeout(window._clickTimeout[n]),window._clickTimeout[n]=null):(!function(e,t){e.stopPropagation(),_([t])}(e,t),window._clickTimeout[n]=setTimeout((function(){clearTimeout(window._clickTimeout[n]),window._clickTimeout[n]=null}),200))}return i.a.createElement("div",{className:"FileRepresentation",onClick:function(){_([])},onKeyDown:function(){}},i.a.createElement(J,null),G.map((function(e){return i.a.createElement("div",{className:"columns",key:e.id},e.map((function(e){return i.a.createElement("div",{key:e.path,className:k.includes(e)?"column item-selected":"column",onClick:function(t){return S(t,e)},onKeyDown:function(){}},i.a.createElement("div",null,i.a.createElement(z,{itemPath:e.path,isFolder:!e.isFile})))})),new Array(6-e.length).fill().map((function(){return i.a.createElement("div",{key:A.a.generate(),className:"column"})})))})))}var D=n(200),H=n.n(D),I=n(205),M=n.n(I);n(206);function z(e){var t=e.itemPath,n=e.isFolder,a=function(e){var t=e.split("/");return t[t.length-1]}(t),r=function(e){var t=e.split(".");return t.length>1?t[t.length-1]:""}(a);return i.a.createElement("div",{className:"FileItem"},n&&i.a.createElement("img",{src:M.a,height:55,width:55,alt:"folder"}),!n&&i.a.createElement(H.a,Object.assign({extension:r},D.defaultStyles[r],{size:55})),i.a.createElement("div",{className:"file-detail"},i.a.createElement("small",null,a)))}function J(){var e=Object(o.useGlobal)("rootNode"),t=Object(c.a)(e,1)[0],n=Object(o.useGlobal)("currentFolder"),a=Object(c.a)(n,2),l=a[0],u=a[1],s=l.path.replace(t.path,"").split("/").filter((function(e){return e}));return i.a.createElement("nav",{className:"breadcrumb","aria-label":"breadcrumbs"},i.a.createElement("ul",null,s.map((function(e,n){return i.a.createElement("li",{key:e,onClick:function(){return function(e){var n=s.filter((function(t,n){return n<e})),a=s[e],c=[t.path].concat(Object(T.a)(n),[a]).join("/"),l=r.findNodeBy(t,(function(e){return e.path===c}));u(l)}(n)}},i.a.createElement("a",null,e))})),i.a.createElement((function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement("a",null)),0===s.length&&i.a.createElement("li",null,i.a.createElement("a",null)))}),null)))}n(207);function K(){var e=Object(o.useGlobal)("rootNode"),t=Object(c.a)(e,2)[1],n=Object(o.useGlobal)("currentFolder"),r=Object(c.a)(n,2)[1],u=Object(o.useGlobal)("loading"),f=Object(c.a)(u,2)[1];return Object(l.useEffect)((function(){var e=s.FILE_EXPLORER_ROOT;f(!0),a.showFolderTree(e,3).then((function(e){t(e),r(e)})).catch((function(e){return e})).finally((function(){return f(!1)}))}),[]),i.a.createElement("div",{className:"FileStoragePage"},i.a.createElement(G,null),i.a.createElement(B,null),i.a.createElement(N,null),i.a.createElement(L,null))}Object(o.setGlobal)(F),n.d(t,"default",(function(){return K}))},30:function(e,t,n){"use strict";n.r(t),n.d(t,"AGENT_HOST",(function(){return a})),n.d(t,"FILE_EXPLORER_ROOT",(function(){return r}));var a="/api",r="/home"},55:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=55}}]);
//# sourceMappingURL=5.f5544c6e.chunk.js.map